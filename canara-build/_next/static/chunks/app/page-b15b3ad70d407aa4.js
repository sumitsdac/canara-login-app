(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1692:function(e,t,a){Promise.resolve().then(a.bind(a,1605))},1605:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),r=a(2265);a(703);var l=a(7908),n={src:"/_next/static/media/Refresh-icon.a85f012c.svg"};let i=()=>btoa(1e9*Math.random()).substring(0,6),o=()=>{let e=i(),t=["cursive"];return{html:e.split("").map(e=>{let a=Math.trunc(Math.random()*t.length);return'<span\n        style="\n        transform:rotate('.concat(-20+Math.trunc(30*Math.random()),"deg);\n        font-family:").concat(a[a],';\n        "\n       >').concat(e," </span>")}).join(""),captchaValue:e}},c="apigee-tr-test.digitalapicraft.com",d="https://".concat(c,"/v1/user-auth/cancel"),u="https://".concat(c,"/v1/oauth2/auth-code");var p=e=>{(0,r.useRef)(null);let[t,a]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[v,f]=(0,r.useState)(""),[x,_]=(0,r.useState)("* please fill all the required fields"),[g,j]=(0,r.useState)(""),[N,S]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),L=()=>{let e=o();S(e.html),j(e.captchaValue)},I=e=>e===g;return((0,r.useEffect)(()=>{e.validateSession(),L()},[]),v)?(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:v}}):w?(0,s.jsx)("h1",{className:"form-wrapper",children:"Login attempt limit has exceeded"}):(0,s.jsxs)("form",{className:"form",children:[(0,s.jsx)("h1",{className:"form_title",children:" Log In "}),(0,s.jsxs)("div",{className:"form_div",children:[(0,s.jsx)("input",{type:"text",className:"form_input required ".concat(h&&""===t?"error":""),placeholder:" ",value:t,onChange:e=>{a(e.target.value)}}),(0,s.jsx)("label",{className:"form_label",children:"Username"})]}),(0,s.jsxs)("div",{className:"form_div",children:[(0,s.jsx)("input",{type:"password",className:"form_input required ".concat(h&&""===i?"error":""),placeholder:" ",value:i,onChange:e=>{c(e.target.value)}}),(0,s.jsx)("label",{className:"form_label",children:"Password"})]}),(0,s.jsxs)("div",{id:"captcha",className:"form_div",children:[(0,s.jsx)("div",{className:"preview",dangerouslySetInnerHTML:{__html:N}}),(0,s.jsxs)("div",{className:"captcha_form",children:[(0,s.jsx)("input",{type:"text",id:"captcha_form",className:"form_input form_input_captcha required ".concat(h?""!==d&&y?"":"error":""),placeholder:" ",value:d,onChange:e=>{p(e.target.value)}}),(0,s.jsx)("label",{className:"form_label form_label_captcha",children:"Enter Captcha"}),(0,s.jsx)("button",{className:"captcha_refersh",onClick:e=>{e.preventDefault(),L()},children:(0,s.jsx)("img",{width:28,height:28,src:n.src,alt:"refresh icon"})})]})]}),(0,s.jsxs)("div",{className:"button-wrapper",children:[h?(0,s.jsx)("div",{className:"error",dangerouslySetInnerHTML:{__html:x}}):null,(0,s.jsx)("input",{type:"submit",className:"form_button login",value:"Log In",onClick:a=>{if(a.preventDefault(),""===t||""===i||""===d)_("* Please fill all the required fields"),m(!0);else if(I(d)){b(!0);let a=JSON.stringify({username:t,password:i,session_identifier:e.sessionID});try{(0,l.Z)("/userauth/login/verify",{method:"post",headers:{"Content-type":"application/json"},data:a}).then(t=>{let a=t.headers.get("Content-Type");if(a&&a.includes("text/html"))f(t.data);else if(a&&a.includes("text/plain"))f(t.data);else{var s;(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.status)&&("otp"===t.data.status?e.setUserLoginStatus(!0):"success"===t.data.status&&window.location.replace(u+"?session_identifier="+e.sessionID))}}).catch(e=>{var t,a,s,r,l;(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.max_login_attempt_crossed)?C(!0):((null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.status)===400||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)===401?_("Invalid Credentials. Please provide correct username/password"):(null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.status)===415?_("Invalid Content or Media Type"):_("Server Error. Please try again Later"),m(!0))})}catch(e){_("Server Error. Please try again Later"),m(!0)}}else _("Please verify the captcha"),m(!0),b(!1),L()}}),(0,s.jsx)("input",{type:"submit",className:"form_button secondary",value:"Cancel",onClick:t=>e.cancelLogin(t)})]})]})},h=e=>{let[t,a]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[d,p]=(0,r.useState)("* please fill all the required fields"),[h,m]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{e.validateSession()},[]),n)?(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:n}}):h?(0,s.jsx)("h1",{className:"form-wrapper",children:"OTP attempt limit has exceeded"}):(0,s.jsxs)("form",{className:"form",children:[(0,s.jsx)("h1",{className:"form_title",children:" OTP Validation "}),(0,s.jsxs)("div",{className:"form_div",children:[(0,s.jsx)("input",{type:"text",className:"form_input required ".concat(o&&""===t?"error":""),placeholder:" ",value:t,onChange:e=>{a(e.target.value)}}),(0,s.jsx)("label",{className:"form_label",children:"OTP"})]}),(0,s.jsxs)("div",{className:"button-wrapper",children:[o?(0,s.jsx)("div",{className:"error",dangerouslySetInnerHTML:{__html:d}}):null,(0,s.jsx)("input",{type:"submit",className:"form_button",value:"Submit",onClick:a=>{if(a.preventDefault(),""===t)c(!0),p("* Please fill all the required fields");else{let a=JSON.stringify({otp:t,session_identifier:e.sessionID});try{(0,l.Z)("/userauth/otp/verify",{method:"post",headers:{"Content-type":"application/json"},data:a}).then(t=>{let a=t.headers.get("Content-Type");a&&a.includes("text/html")?i(t.data):a&&a.includes("text/plain")?i(t.data):200===t.status&&window.location.replace(u+"?session_identifier="+e.sessionID)}).catch(e=>{var t,a,s;console.log(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status),(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.max_login_attempt_crossed)?m(!0):(400===e.response.status||401===e.response.status?p("Invalid or expired OTP"):415===e.response.status?p("Invalid Content or Media Type"):p("Server Error. Please try again Later"),c(!0))})}catch(e){p("Server Error. Please try again Later"),c(!0)}}}}),(0,s.jsx)("input",{type:"submit",className:"form_button secondary",value:"Cancel",onClick:t=>e.cancelLogin(t)})]})]})};a(4905);var m=()=>(0,s.jsx)("div",{className:"header-wrapper",children:(0,s.jsx)("div",{className:"header",children:(0,s.jsx)("img",{src:"/_next/static/media/CB--API-BANKING-LOGO.a51c71b7.jpg",width:"207px",height:"74px",alt:"logo"})})});a(4612);var v={src:"/_next/static/media/Rolling.2408b1fe.gif"},f=()=>{let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(""),[n,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1),u=()=>{let e=new URLSearchParams(document.location.search).get("session_identifier");c(!0),i(!1),l(e)},f=e=>{e.preventDefault(),window.location.replace(d+"?session_identifier="+a)};return(0,r.useEffect)(()=>{u()},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{}),(0,s.jsx)("div",{className:"form-wrapper",children:n?(0,s.jsx)("img",{width:"120px",height:"120px",src:v.src,alt:"Loader"}):o?e?(0,s.jsx)(h,{sessionID:a,validateSession:u,cancelLogin:f}):(0,s.jsx)(p,{sessionID:a,validateSession:u,setUserLoginStatus:t,cancelLogin:f}):(0,s.jsx)("h1",{className:"form-wrapper",children:"Invalid session"})})]})}},4612:function(){},4905:function(){}},function(e){e.O(0,[127,971,69,744],function(){return e(e.s=1692)}),_N_E=e.O()}]);